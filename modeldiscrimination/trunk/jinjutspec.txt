objectivespec ::= magic mapping (procedure_def)* (array_def)*

magic ::= "ObjectiveSpecification-0.1" NEWLINE NEWLINE

mapping_def ::= mapping_header mapping_body mapping_footer NEWLINE
procedure_def ::= procedure_header procedure_body procedure_footer NEWLINE
array_def ::= array_header array_body array_footer NEWLINE

procedure_header ::= "procedure" WHITESPACE identifier NEWLINE 
procedure_body ::= (procedure_identifier | instruction)+

instruction ::= "knockout:" WHITESPACE gene_identifier NEWLINE
	| "runtimesteps:" WHITESPACE integer NEWLINE
	| "treatment:" WHITESPACE factor_identifier WHITESPACE "=" WHITESPACE realnumber

procedure_footer ::= "endprocedure" NEWLINE
procedure_identifier ::= identifier

array_header ::= "array" WHITESPACE identifier NEWLINE
array_body ::= (identifier NEWLINE)+
array_footer ::= "endarray" NEWLINE


mapping_def ::= "mapping" WHITESPACE identifier NEWLINE
mapping_body ::= (factor_def NEWLINE)+   
mapping_footer ::= "endmapping" NEWLINE 


factor_def ::= gene_identifier WHITESPACE "=" WHITESPACE gene_manufacturer_identifier NEWLINE
gene_identifier ::= identifier
factor_identifier ::= identifier
gene_manufacturer_identifier ::= identifier


----- 8< -------------------------------------------------------------------

ObjectiveSpecification-0.1

mapping nameid
  <transsys factor name> = <row label>
endmapping

procedure wildtype
  runtimesteps: 900
endprocedure

procedure ko_jin1
  knockout: jin1
  runtimesteps: 900
endprocedure

procedure ja_treatment
  treatment: jasmonate = 1.0
endprocedure

procedure posttreatment
  runtimesteps: 100
endprocedure

array a0
  wildtype
  posttreatment
endarray

array a1
  wildtype
  ja_treatment
  posttreatment
endarray

array a2
  ko_jin1
  posttreatment
endarray

array a3
  ko_jin1
  ja_treatment
  posttreatment
endarray

a4
a5

array a6
  ko_jin1_and_jut
  posttreatment
endarray

array a7
  ko_jin1_and_jut
  ja_treatment
  posttreatment
endarray

----- 8< -------------------------------------------------------------------

array j0
  wildtype
  runtimesteps: 1000
endarray

array j1
  wildtype
  runtimesteps: 1000
  ja_treatment
  runtimesteps: 12
endarray

array j2
  wildtype
  runtimesteps: 1000
  ja_treatment
  runtimesteps: 72
endarray

----- 8< -------------------------------------------------------------------

Given objects:

A transsys program with genes jin1
A gene expression matrix with columns a0, a1, ..., a7 and columns labelled by
  Affymetrix number

endexperiment

----- 8< -------------------------------------------------------------------

Given objects:

A transsys program with genes jin1
A gene expression matrix with columns a0, a1, ..., a7 and columns labelled by
  Affymetrix number

