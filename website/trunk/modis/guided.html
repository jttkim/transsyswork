<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Guided transsys program entry</title>
<script language="JavaScript" type="text/javascript">
var farray = new Array();
var garray = new Array(); 
var prarray;
var t = new Array();
var st;
var t_name;
var product = new Array();


function insertfactor(val){
   var farray2str = farray.toString();
   if (farray2str.search(val) == 0)
     alert("factor name already exist, try another name ");
   else
     farray[farray.length]=val;
}


function insertgene(){
  var oList;
  var a="";
  var r="";
  var index;
  var val;
  var garray2str;
  val = document.guided1.gene.value;
  garray2str = garray.toString();
  if (garray2str.search(val) == 0)
    alert("gene name already exist, try another name ");
  else {
    garray[garray.length] = document.guided1.gene.value;
    index = guided1.elements["product"].selectedIndex;
    product[product.length] = guided1.elements["product"].options[index].text;
    oList = guided1.elements["activate"];
    for(var i = 0; i < oList.options.length; i++) {
      if(oList.options[i].selected == true) {
        a = a + "<div style='text-indent: 40px'>" + oList.options[i].text + ": activate(0.1, 1.0);" + "<\/div>";
      }
     }
    oList = guided1.elements["repress"];
    for(var i = 0; i < oList.options.length; i++) {
      if(oList.options[i].selected == true) {
        r = r + "<div style='text-indent: 40px'>"+oList.options[i].text+": repress(0.1, 1.0);"+"<\/div>";
      }
     }
     t.push(a + r);
  }
}


function show(op) {
  var factor = "";
  var fac = new Array();
  var string="transsys "+t_name+"<br>{<br>";
  if (op) {
    for(i = 0; i < farray.length; i++) {
      factor = "<div style='text-indent: 20px;'>"+"factor "+farray[i]+"<z/div>"+
      "<div style='text-indent: 20px;'>"+"{<\/div>" +
      "<div style='text-indent: 30px;'>"+"decay: 0.5;"+"<\/div>" +
      "<div style='text-indent: 30px;'>"+"diffusibility: 0.0;"+"<\/div>" +
      "<div style='text-indent: 20px;'>"+"}<\/div>";
      string = string+factor;
    }
    if(farray.length > 0) {
      document.getElementById('myDiv').innerHTML = string;
      Show(1);
      Box2(farray);
    }
  st = string;
  }
  else {
    var string="";
    var string_e="}";
    for(i = 0; i < garray.length; i++) {
      gene = "<div style='text-indent: 20px;'>"+"gene "+garray[i]+"<\/div>"+
      "<div style='text-indent: 20px;'>"+"{<\/div>" +
      "<div style='text-indent: 30px;'>"+"promoter"+"<\/div>" +
      "<div style='text-indent: 30px;'>"+"{"+"<\/div>" +
      "<div style='text-indent: 40px;'>"+"constitutive: 0.1;"+"<\/div>" + t[i] +
      "<div style='text-indent: 30px;'>"+"}"+"<\/div>" +
      "<div style='text-indent: 30px;'>"+"product"+"<\/div>" +
      "<div style='text-indent: 30px;'>"+"{"+"<\/div>" +
      "<div style='text-indent: 40px;'>"+"default: " + product[i] + ";"+"<\/div>" +
      "<div style='text-indent: 30px;'>"+"}"+"<\/div>" +
      "<div style='text-indent: 20px;'>"+"}"+"<\/div>";
      string = string+gene;
    }
    if(farray.length > 0)
      string = string + string_e;
      document.getElementById('myDiv1').innerHTML = string;
      Shows(1);
  }
}


function Show(a) {
  obj=document.getElementById("myDiv1");
  if (a) obj.style.display="block";
    else obj.style.display="none";
}


function Shows(a) {
  obj=document.getElementById("myDiv1");
  //if (a) obj.style.display="block";
  obj.style.display="block";
}


function Box2(array) {
  var f=document.guided1;
  f.activate.options.length=null;
  for(i=0; i<array.length; i++) {
    f.activate.options[i]=new Option(array[i], i); 
    f.product.options[i]=new Option(array[i], i); 
    f.repress.options[i]=new Option(array[i], i); 
  }   
}



function receive() {
  var parameters = location.search;
  //document.getElementById("string").innerHTML = parameters;
}

function parse() {
  var parameters = location.search.substring(1).split("&");
  var data = "";
  for (x in parameters) {
    var temp = parameters[x].split("=");
    thevar = unescape(temp[0]);
    thevalue = unescape(temp[1]);
    t_name = thevalue;
    thevalue1 = thevalue.replace("+", " ");
    data += thevar + "=" + thevalue1 + "<br>";
  }
  //document.getElementById("data").innerHTML = data;
}

function execute() {
  receive();
  parse();
}

window.onload=execute;

</script>
</head>
<body>
<h1 align="center">GRN simulation using transsys program</h1>
<div id="content">
</div> 
<div id="string" class="string">
</div>  
<h2>Guided transsys program entry</h2>
<form ENCTYPE="multipart/form-data" name="guided" action="/cgi-bin/entry.cgi" method="post">
<table>
<tr><td><div id="myDiv">
</div>
<div id="myDiv1" style="display:none;">
</div>
</td></tr>
</table><table>
<tr><td><h3>factor</h3></td></tr>
<tr><td>enter factor name:</td><td><INPUT type="text" name="name"></td></tr>
<tr><td><INPUT type="button" value="add factor" onclick="insertfactor(this.form.name.value),show(1);"></td></tr>
</table>
</form>
<form ENCTYPE="multipart/form-data" name="guided1" action="/cgi-bin/entry.cgi" method="post">
<table>
<tr><td><h3>gene</h3></td></tr>
<tr><td>enter gene name:</td><td><INPUT type="text" name="gene"></td></tr>
<tr><td>gene product</td><td><select name="product"></select></td></tr>
<tr><td>activators:</td><td><select multiple size="2" name="activate"></select></td></tr>
<tr><td>repressors:</td><td><select multiple size="2" name="repress"></select></td></tr>
<tr><td><INPUT type="button" value="add gene" onclick="insertgene(),show(0);"></td></tr>
</table>
<hr>
<h3>Once you have finished ...</h3>
<table>
<tr><td>Demo: copy here you model and submit it for analysis</td></tr>
<tr><td>Model fitting: copy your model and paste it into the previous page, repeat process to create second model</td></tr>
<tr><td><textarea name="tp1" cols="40" rows="10"></textarea></td></tr>
<tr><td><INPUT type="hidden" name="action1" value="display1"></td></tr>
<tr><td><INPUT type="hidden" name="t_experiment" value="demo"></td></tr>
<tr><td><INPUT type="submit" value="Submit transsys model"> (  for experiment type: demo)</td></tr>
</table>
</form>
</body>
</html>
